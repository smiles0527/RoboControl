<UserControl x:Class="ControlWorkbench.App.Views.DroneMissionPlannerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1200"
             Background="#1E1E1E">
    
    <UserControl.Resources>
        <Style TargetType="Button" x:Key="ToolButton">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>
        
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,5,0,2"/>
        </Style>
        
        <Style TargetType="TextBox" x:Key="InputStyle">
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="Padding" Value="5,3"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        
        <!-- Left Panel - Mission Items -->
        <Border Grid.Column="0" Background="#2D2D30" Margin="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="0" Margin="10">
                    <TextBlock Text="Drone Mission Planner" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <!-- Connection Status -->
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,10">
                        <StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Width="10" Height="10" Fill="#4CAF50" Margin="0,0,8,0"/>
                                <TextBlock Text="ArduCopter 4.3.6" Foreground="White"/>
                            </StackPanel>
                            <TextBlock Text="GPS: 14 sats, HDOP: 0.8" Foreground="#888888" FontSize="11" Margin="18,2,0,0"/>
                            <TextBlock Text="Battery: 16.2V (97%)" Foreground="#888888" FontSize="11" Margin="18,2,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Home Position -->
                    <TextBlock Text="Home Position" Style="{StaticResource LabelStyle}"/>
                    <Border Background="#3E3E42" Padding="8" CornerRadius="3">
                        <StackPanel>
                            <TextBlock Text="40.712776, -74.005974" Foreground="White" FontFamily="Consolas"/>
                            <TextBlock Text="Alt: 10m ASL" Foreground="#888888" FontSize="11"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- Mission Items List -->
                <Border Grid.Row="1" Margin="10,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="Mission Items" Style="{StaticResource LabelStyle}" FontWeight="Bold"/>
                        
                        <ListBox x:Name="MissionItemsList" Grid.Row="1" Background="#252526" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="8,6" Margin="0,1" Background="#3E3E42" CornerRadius="3">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="25"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="{Binding Index}" Foreground="#888888" FontWeight="Bold"/>
                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="{Binding Type}" Foreground="White" FontWeight="SemiBold"/>
                                                <TextBlock Text="{Binding Details}" Foreground="#888888" FontSize="10"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                            
                            <!-- Sample items -->
                            <ListBoxItem>
                                <Border Padding="8,6" Margin="0,1" Background="#3E3E42" CornerRadius="3">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="1" Foreground="#888888" FontWeight="Bold"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="TAKEOFF" Foreground="#4CAF50" FontWeight="SemiBold"/>
                                            <TextBlock Text="Altitude: 50m" Foreground="#888888" FontSize="10"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListBoxItem>
                            <ListBoxItem>
                                <Border Padding="8,6" Margin="0,1" Background="#4E4E52" CornerRadius="3">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="2" Foreground="#888888" FontWeight="Bold"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="WAYPOINT" Foreground="#00BCD4" FontWeight="SemiBold"/>
                                            <TextBlock Text="40.7128, -74.0060, 50m" Foreground="#888888" FontSize="10" FontFamily="Consolas"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListBoxItem>
                            <ListBoxItem>
                                <Border Padding="8,6" Margin="0,1" Background="#3E3E42" CornerRadius="3">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="3" Foreground="#888888" FontWeight="Bold"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="LOITER" Foreground="#FF9800" FontWeight="SemiBold"/>
                                            <TextBlock Text="Hold for 30 seconds" Foreground="#888888" FontSize="10"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListBoxItem>
                            <ListBoxItem>
                                <Border Padding="8,6" Margin="0,1" Background="#3E3E42" CornerRadius="3">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="4" Foreground="#888888" FontWeight="Bold"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="WAYPOINT" Foreground="#00BCD4" FontWeight="SemiBold"/>
                                            <TextBlock Text="40.7135, -74.0055, 50m" Foreground="#888888" FontSize="10" FontFamily="Consolas"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListBoxItem>
                            <ListBoxItem>
                                <Border Padding="8,6" Margin="0,1" Background="#3E3E42" CornerRadius="3">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="25"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="5" Foreground="#888888" FontWeight="Bold"/>
                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="RTL" Foreground="#F44336" FontWeight="SemiBold"/>
                                            <TextBlock Text="Return to Launch" Foreground="#888888" FontSize="10"/>
                                        </StackPanel>
                                    </Grid>
                                </Border>
                            </ListBoxItem>
                        </ListBox>
                    </Grid>
                </Border>
                
                <!-- Add Item Buttons -->
                <StackPanel Grid.Row="2" Margin="10">
                    <WrapPanel>
                        <Button Content="Takeoff" Style="{StaticResource ToolButton}" Width="60" FontSize="10"/>
                        <Button Content="WP" Style="{StaticResource ToolButton}" Width="40" FontSize="10" ToolTip="Waypoint"/>
                        <Button Content="Loiter" Style="{StaticResource ToolButton}" Width="50" FontSize="10"/>
                        <Button Content="RTL" Style="{StaticResource ToolButton}" Width="40" FontSize="10"/>
                        <Button Content="Land" Style="{StaticResource ToolButton}" Width="45" FontSize="10"/>
                        <Button Content="Orbit" Style="{StaticResource ToolButton}" Width="45" FontSize="10"/>
                        <Button Content="Survey" Style="{StaticResource ToolButton}" Width="50" FontSize="10"/>
                        <Button Content="Cam" Style="{StaticResource ToolButton}" Width="40" FontSize="10" ToolTip="Camera Trigger"/>
                    </WrapPanel>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Center - Map View -->
        <Border Grid.Column="1" Background="#252526" Margin="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Toolbar -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#2D2D30" Height="45">
                    <Button Content="Upload" Width="80" Margin="5" Background="#4CAF50" Foreground="White" ToolTip="Upload mission to drone"/>
                    <Button Content="Download" Width="80" Margin="5" ToolTip="Download mission from drone"/>
                    <Button Content="Clear" Width="60" Margin="5"/>
                    <Separator Width="1" Background="#555555" Margin="5"/>
                    <Button Content="Arm" Width="60" Margin="5" Background="#FF9800" Foreground="White"/>
                    <Button Content="Start" Width="80" Margin="5" Background="#2196F3" Foreground="White"/>
                    <Separator Width="1" Background="#555555" Margin="5"/>
                    <ComboBox Width="100" Margin="5" SelectedIndex="0">
                        <ComboBoxItem Content="Map"/>
                        <ComboBoxItem Content="Satellite"/>
                        <ComboBoxItem Content="Terrain"/>
                    </ComboBox>
                    <Separator Width="1" Background="#555555" Margin="5"/>
                    <TextBlock Text="Click map to add waypoints" Foreground="#888888" VerticalAlignment="Center" Margin="10,0"/>
                </StackPanel>
                
                <!-- Map Placeholder -->
                <Canvas x:Name="MapCanvas" Grid.Row="1" Background="#1a1a2e" ClipToBounds="True">
                    <!-- Map will be rendered here -->
                    <TextBlock Canvas.Left="50" Canvas.Top="50" 
                               Text="Map View" 
                               FontSize="24" 
                               Foreground="#333355"/>
                    <TextBlock Canvas.Left="50" Canvas.Top="90" 
                               Text="(Would integrate with OpenStreetMap, Bing, or Google Maps)" 
                               FontSize="12" 
                               Foreground="#444466"/>
                    
                    <!-- Sample flight path -->
                    <Polyline Stroke="#00BCD4" StrokeThickness="3" StrokeDashArray="5,3"
                              Points="200,300 350,200 500,180 600,250 400,350"/>
                    
                    <!-- Sample waypoint markers -->
                    <Ellipse Canvas.Left="192" Canvas.Top="292" Width="16" Height="16" Fill="#4CAF50" Stroke="White" StrokeThickness="2"/>
                    <Ellipse Canvas.Left="342" Canvas.Top="192" Width="16" Height="16" Fill="#00BCD4" Stroke="White" StrokeThickness="2"/>
                    <Ellipse Canvas.Left="492" Canvas.Top="172" Width="16" Height="16" Fill="#FF9800" Stroke="White" StrokeThickness="2"/>
                    <Ellipse Canvas.Left="592" Canvas.Top="242" Width="16" Height="16" Fill="#00BCD4" Stroke="White" StrokeThickness="2"/>
                    <Ellipse Canvas.Left="392" Canvas.Top="342" Width="16" Height="16" Fill="#F44336" Stroke="White" StrokeThickness="2"/>
                    
                    <!-- Drone icon -->
                    <Path Canvas.Left="350" Canvas.Top="195" Fill="#FFD700" Stroke="Black" StrokeThickness="1"
                          Data="M0,8 L4,0 L8,8 L4,6 Z">
                        <Path.RenderTransform>
                            <RotateTransform Angle="45" CenterX="4" CenterY="4"/>
                        </Path.RenderTransform>
                    </Path>
                    
                    <!-- Home icon -->
                    <Path Canvas.Left="195" Canvas.Top="305" Fill="White" 
                          Data="M10,20 L10,12 L5,12 L10,5 L15,12 L10,12 L10,20 Z"/>
                </Canvas>
                
                <!-- Bottom info bar -->
                <Border Grid.Row="2" Background="#2D2D30" Padding="10">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Distance: " Foreground="#888888"/>
                        <TextBlock Text="1.2 km" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Est. Time: " Foreground="#888888"/>
                        <TextBlock Text="4:30" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Waypoints: " Foreground="#888888"/>
                        <TextBlock Text="5" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Max Alt: " Foreground="#888888"/>
                        <TextBlock Text="50m" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Battery Est: " Foreground="#888888"/>
                        <TextBlock Text="15%" Foreground="#4CAF50"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
        
        <!-- Right Panel - Waypoint Details & Settings -->
        <Border Grid.Column="2" Background="#2D2D30" Margin="5">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10">
                    <!-- Selected Waypoint -->
                    <TextBlock Text="Waypoint 2" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,15">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Latitude:" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox Grid.Row="0" Grid.Column="1" Text="40.712800" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Longitude:" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox Grid.Row="1" Grid.Column="1" Text="-74.006000" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Altitude (m):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox Grid.Row="2" Grid.Column="1" Text="50" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Speed (m/s):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox Grid.Row="3" Grid.Column="1" Text="5.0" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Hold (sec):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox Grid.Row="4" Grid.Column="1" Text="0" Style="{StaticResource InputStyle}"/>
                        </Grid>
                    </Border>
                    
                    <!-- Actions -->
                    <TextBlock Text="Actions at Waypoint" Style="{StaticResource LabelStyle}" FontWeight="Bold"/>
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,5,0,15">
                        <StackPanel>
                            <CheckBox Content="Trigger Camera" Foreground="White" Margin="0,3"/>
                            <CheckBox Content="Set ROI" Foreground="White" Margin="0,3"/>
                            <CheckBox Content="Change Speed" Foreground="White" Margin="0,3"/>
                            <CheckBox Content="Gimbal Pitch" Foreground="White" Margin="0,3"/>
                        </StackPanel>
                    </Border>
                    
                    <Separator Background="#555555" Margin="0,5,0,15"/>
                    
                    <!-- Mission Settings -->
                    <TextBlock Text="Mission Settings" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="Default Altitude" Style="{StaticResource LabelStyle}"/>
                            <TextBox Text="50" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Text="Default Speed (m/s)" Style="{StaticResource LabelStyle}"/>
                            <TextBox Text="5.0" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Text="Finish Action" Style="{StaticResource LabelStyle}"/>
                            <ComboBox SelectedIndex="0">
                                <ComboBoxItem Content="Return to Launch"/>
                                <ComboBoxItem Content="Land"/>
                                <ComboBoxItem Content="Loiter"/>
                            </ComboBox>
                        </StackPanel>
                    </Border>
                    
                    <Separator Background="#555555" Margin="0,5,0,15"/>
                    
                    <!-- Safety -->
                    <TextBlock Text="Safety Limits" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="Max Altitude (m)" Style="{StaticResource LabelStyle}"/>
                            <TextBox Text="120" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Text="Max Distance (m)" Style="{StaticResource LabelStyle}"/>
                            <TextBox Text="5000" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Text="RTL Altitude (m)" Style="{StaticResource LabelStyle}"/>
                            <TextBox Text="60" Style="{StaticResource InputStyle}"/>
                            
                            <CheckBox Content="Enable Geofence" Foreground="White" IsChecked="True" Margin="0,10,0,0"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Export -->
                    <TextBlock Text="Export Mission" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Button Content="Save as .waypoints" Background="#0078D4" Foreground="White" Padding="10,8" Margin="0,0,0,5"/>
                    <Button Content="Save as QGC Plan (.plan)" Background="#3E3E42" Foreground="White" Padding="10,8" Margin="0,0,0,5"/>
                    <Button Content="Copy MAVLink Commands" Background="#3E3E42" Foreground="White" Padding="10,8"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
