id<UserControl x:Class="ControlWorkbench.App.Views.DroneMissionPlannerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1200"
             Background="#1E1E1E">
    
    <UserControl.Resources>
        <Style TargetType="Button" x:Key="ToolButton">
            <Setter Property="Height" Value="32"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        
        <Style TargetType="TextBlock" x:Key="LabelStyle">
            <Setter Property="Foreground" Value="#CCCCCC"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,5,0,2"/>
        </Style>
        
        <Style TargetType="TextBox" x:Key="InputStyle">
            <Setter Property="Background" Value="#3E3E42"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#555555"/>
            <Setter Property="Padding" Value="5,3"/>
            <Setter Property="Margin" Value="0,0,0,5"/>
        </Style>
    </UserControl.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        
        <!-- Left Panel - Mission Items -->
        <Border Grid.Column="0" Background="#2D2D30" Margin="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <StackPanel Grid.Row="0" Margin="10">
                    <TextBlock Text="Drone Mission Planner" FontSize="18" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <!-- Home Position -->
                    <TextBlock Text="Home Position" Style="{StaticResource LabelStyle}"/>
                    <Border Background="#3E3E42" Padding="8" CornerRadius="3" Margin="0,0,0,10">
                        <StackPanel>
                            <TextBlock x:Name="HomePositionText" Text="40.712776, -74.005974" Foreground="White" FontFamily="Consolas"/>
                            <TextBlock x:Name="HomeAltText" Text="Alt: 0m" Foreground="#888888" FontSize="11"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                
                <!-- Mission Items List -->
                <Border Grid.Row="1" Margin="10,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Text="Mission Items" Style="{StaticResource LabelStyle}" FontWeight="Bold"/>
                        
                        <ListBox x:Name="MissionItemsList" Grid.Row="1" Background="#252526" BorderThickness="0" 
                                 SelectionChanged="MissionItemsList_SelectionChanged">
                        </ListBox>
                    </Grid>
                </Border>
                
                <!-- Add Item Buttons -->
                <StackPanel Grid.Row="2" Margin="10">
                    <WrapPanel>
                        <Button Content="Takeoff" Style="{StaticResource ToolButton}" Click="AddTakeoff_Click"/>
                        <Button Content="Waypoint" Style="{StaticResource ToolButton}" Click="AddWaypoint_Click"/>
                        <Button Content="Loiter" Style="{StaticResource ToolButton}" Click="AddLoiter_Click"/>
                        <Button Content="RTL" Style="{StaticResource ToolButton}" Click="AddRTL_Click"/>
                        <Button Content="Land" Style="{StaticResource ToolButton}" Click="AddLand_Click"/>
                        <Button Content="Delete" Style="{StaticResource ToolButton}" Background="#C62828" Click="DeleteItem_Click"/>
                    </WrapPanel>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Center - Map View -->
        <Border Grid.Column="1" Background="#252526" Margin="5">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Toolbar -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" Background="#2D2D30" Height="45">
                    <Button Content="Clear All" Style="{StaticResource ToolButton}" Click="ClearMission_Click"/>
                    <Separator Width="1" Background="#555555" Margin="5"/>
                    <Button Content="Zoom +" Style="{StaticResource ToolButton}" Width="50" Click="ZoomIn_Click"/>
                    <Button Content="Zoom -" Style="{StaticResource ToolButton}" Width="50" Click="ZoomOut_Click"/>
                    <Button Content="Reset View" Style="{StaticResource ToolButton}" Click="ResetView_Click"/>
                    <Separator Width="1" Background="#555555" Margin="5"/>
                    <TextBlock Text="Right-click map to add waypoints" Foreground="#888888" VerticalAlignment="Center" Margin="10,0"/>
                </StackPanel>
                
                <!-- Map Canvas -->
                <Canvas x:Name="MapCanvas" Grid.Row="1" Background="#1a1a2e" ClipToBounds="True"/>
                
                <!-- Bottom info bar -->
                <Border Grid.Row="2" Background="#2D2D30" Padding="10">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Distance: " Foreground="#888888"/>
                        <TextBlock x:Name="TotalDistanceText" Text="0 m" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Est. Time: " Foreground="#888888"/>
                        <TextBlock x:Name="EstTimeText" Text="0:00" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Waypoints: " Foreground="#888888"/>
                        <TextBlock x:Name="WaypointCountText" Text="0" Foreground="White" Margin="0,0,20,0"/>
                        <TextBlock Text="Max Alt: " Foreground="#888888"/>
                        <TextBlock x:Name="MaxAltText" Text="0m" Foreground="White"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>
        
        <!-- Right Panel - Waypoint Details & Export -->
        <Border Grid.Column="2" Background="#2D2D30" Margin="5">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="10">
                    <!-- Selected Waypoint -->
                    <TextBlock x:Name="SelectedWaypointTitle" Text="No Selection" FontSize="16" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Border x:Name="WaypointEditPanel" Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,15" Visibility="Collapsed">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Latitude:" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox x:Name="WpLatInput" Grid.Row="0" Grid.Column="1" Style="{StaticResource InputStyle}" TextChanged="WaypointInput_Changed"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Longitude:" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox x:Name="WpLonInput" Grid.Row="1" Grid.Column="1" Style="{StaticResource InputStyle}" TextChanged="WaypointInput_Changed"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Altitude (m):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox x:Name="WpAltInput" Grid.Row="2" Grid.Column="1" Style="{StaticResource InputStyle}" TextChanged="WaypointInput_Changed"/>
                            
                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Speed (m/s):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox x:Name="WpSpeedInput" Grid.Row="3" Grid.Column="1" Style="{StaticResource InputStyle}" TextChanged="WaypointInput_Changed"/>
                            
                            <TextBlock Grid.Row="4" Grid.Column="0" Text="Hold (sec):" Foreground="#AAAAAA" Margin="0,5"/>
                            <TextBox x:Name="WpHoldInput" Grid.Row="4" Grid.Column="1" Style="{StaticResource InputStyle}" TextChanged="WaypointInput_Changed"/>
                        </Grid>
                    </Border>
                    
                    <Separator Background="#555555" Margin="0,5,0,15"/>
                    
                    <!-- Mission Settings -->
                    <TextBlock Text="Mission Settings" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Border Background="#3E3E42" Padding="10" CornerRadius="5" Margin="0,0,0,15">
                        <StackPanel>
                            <TextBlock Text="Default Altitude (m)" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="DefaultAltInput" Text="50" Style="{StaticResource InputStyle}"/>
                            
                            <TextBlock Text="Default Speed (m/s)" Style="{StaticResource LabelStyle}"/>
                            <TextBox x:Name="DefaultSpeedInput" Text="5.0" Style="{StaticResource InputStyle}"/>
                        </StackPanel>
                    </Border>
                    
                    <Separator Background="#555555" Margin="0,5,0,15"/>
                    
                    <!-- Export -->
                    <TextBlock Text="Export Mission" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,0,0,10"/>
                    
                    <Button Content="Save as .waypoints" Background="#0078D4" Foreground="White" Padding="10,8" Margin="0,0,0,5" Click="SaveWaypoints_Click"/>
                    <Button Content="Save as QGC Plan (.plan)" Background="#3E3E42" Foreground="White" Padding="10,8" Margin="0,0,0,5" Click="SaveQGCPlan_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</UserControl>
